let params=new URL(document.location).searchParams,projetid=parseInt(params.get("id"));const projetContainer=document.querySelector(".projet-container"),projetHeader=document.querySelector(".projet-header"),projetHeaderTitle=projetHeader.querySelector("h1");async function fetchProjet(){return fetch(`https://pa-delamare.fr/api/projet/${projetid}`).then((function(res){return res.json()})).then((function(projet){return projet})).catch((function(err){console.log("erreur au niveau de la requête")}))}async function showFetchProjet(){const projet=await fetchProjet();projetHeaderTitle.innerText=`${projet[0].name}`;let projetContextContainer=document.createElement("div");projetContextContainer.setAttribute("class","projet-context__container"),projetContainer.appendChild(projetContextContainer);let projetContextHeader=document.createElement("h2");projetContextHeader.innerText="Contexte",projetContextContainer.appendChild(projetContextHeader);let projetContext=document.createElement("p");projetContext.innerText=`${projet[0].context}`,projetContextContainer.appendChild(projetContext);let projetImageContainer=document.createElement("div");projetImageContainer.setAttribute("class","projet-image__container"),projetContainer.appendChild(projetImageContainer);let projetImage=document.createElement("img");projetImage.setAttribute("src",`${projet[0].image}`),projetImage.setAttribute("alt","Aperçu du projet"),projetImageContainer.appendChild(projetImage);let projetImageBackground=document.createElement("div");projetImageBackground.setAttribute("class","projet-image__background"),projetImageContainer.appendChild(projetImageBackground);let projetDescriptionContainer=document.createElement("div");projetDescriptionContainer.setAttribute("class","projet-description__container"),projetContainer.appendChild(projetDescriptionContainer);let projetDescriptionHeader=document.createElement("h2");projetDescriptionHeader.innerText="Description",projetDescriptionContainer.appendChild(projetDescriptionHeader);let projetDescription=document.createElement("p");projetDescription.innerText=`${projet[0].description2}`,projetDescriptionContainer.appendChild(projetDescription);let projetLinkContainer=document.createElement("div");projetLinkContainer.setAttribute("class","projet-link__container"),projetContainer.appendChild(projetLinkContainer);let projetLinkHeader=document.createElement("h2");projetLinkHeader.innerText="Lien",projetLinkContainer.appendChild(projetLinkHeader);let projetLink=document.createElement("a");projetLink.setAttribute("href",`${projet[0].link}`),projetLinkContainer.appendChild(projetLink),projetLink.innerHTML='<img src="/images/github.png" alt="Github" />'}async function pageInfos(){const projet=await fetchProjet();document.title=`Pierre-Antoine - ${projet[0].name}`}async function getRealisations(){return fetch("https://pa-delamare.fr/api/projet").then(res=>res.json()).then(realisations=>realisations).catch(()=>{console.log("erreur")})}async function nextProjet(){const projet=await getRealisations();let projetNumberMax=projet.length,nextProjetDiv=document.createElement("div"),nextProjetNumber;nextProjetDiv.setAttribute("class","projet-next"),nextProjetNumber=projetid==projetNumberMax?1:projetid+1,nextProjetDiv.innerHTML=`<a href="./projet.html?id=${nextProjetNumber}" alt="Projet suivant"><img src="../public/images/icons/arrow_forward.svg" alt="aller en avant" /></a>`,projetContainer.appendChild(nextProjetDiv)}async function previousProjet(){const projet=await getRealisations();let projetNumberMax=projet.length,projetNumberMin=1,previousProjetDiv=document.createElement("div"),previousProjetNumber;previousProjetDiv.setAttribute("class","projet-previous"),previousProjetNumber=1==projetid?projetNumberMax:projetid-1,previousProjetDiv.innerHTML=`<a href="./projet.html?id=${previousProjetNumber}" alt="Projet précédent"><img src="../public/images/icons/arrow_back.svg" alt="aller en arrière" /></a>`,projetContainer.appendChild(previousProjetDiv)}async function SEO(){const projet=await getRealisations();document.querySelector('meta[name="keywords"]').setAttribute("content",`${projet[0].name}, Openclassrooms, portfolio, pierre-antoine delamare, openclassroom`)}showFetchProjet(),pageInfos(),nextProjet(),previousProjet(),SEO();